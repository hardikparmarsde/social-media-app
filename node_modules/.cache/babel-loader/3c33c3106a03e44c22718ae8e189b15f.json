{"ast":null,"code":"import _slicedToArray from\"D:/projects/social-media-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import logo from\"../images/logo.png\";import{logout}from\"../actions/actions\";import decode from'jwt-decode';import{Link,useNavigate}from\"react-router-dom\";import{useDispatch}from\"react-redux\";import{useLocation}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Header=function Header(_ref){var user=_ref.user,setUser=_ref.setUser,setItemOffSet=_ref.setItemOffSet;var navigateTo=useNavigate();var dispatch=useDispatch();var location=useLocation();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),mobileMenu=_useState2[0],setMobileMenu=_useState2[1];var handleMobileMenu=function handleMobileMenu(){setMobileMenu(!mobileMenu);};var handleLogout=function handleLogout(){dispatch(logout());setUser(null);navigateTo('/');};useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime())handleLogout();}setUser(JSON.parse(localStorage.getItem('profile')));},[navigateTo]);var handleFeed=function handleFeed(){setItemOffSet(0);};return/*#__PURE__*/_jsxs(\"nav\",{className:\"w-full border-gray-300 rounded mb-2 md:border-b md:pr-5 md:pl-5 xs:pl-2 xs:pr-2 mt-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between flex-wrap items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-none\",children:/*#__PURE__*/_jsx(Link,{to:\"/feed\",onClick:handleFeed,children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"logo\",className:\"md:w-40 xs:w-20\"})})}),user&&/*#__PURE__*/_jsx(\"div\",{className:\"md:hidden sm:block\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleMobileMenu,className:\"\",children:mobileMenu?/*#__PURE__*/_jsx(\"svg\",{className:\"fill-gray-800\",xmlns:\"http://www.w3.org/2000/svg\",width:\"25\",height:\"25\",viewBox:\"0 0 16 16\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"})}):/*#__PURE__*/_jsx(\"svg\",{className:\"fill-gray-800\",xmlns:\"http://www.w3.org/2000/svg\",width:\"25\",height:\"25\",viewBox:\"0 0 16 16\",children:/*#__PURE__*/_jsx(\"path\",{\"fill-rule\":\"evenodd\",d:\"M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z\"})})})}),user&&/*#__PURE__*/_jsx(\"div\",{className:\"hidden md:block p-2\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"flex md:space-x-8 md:text-sm md:font-medium items-center\",children:[/*#__PURE__*/_jsx(Link,{to:\"/feed\",children:/*#__PURE__*/_jsx(\"li\",{children:location.pathname==='/feed'?/*#__PURE__*/_jsx(\"a\",{className:\"block py-2 text-red-600\",children:\"Feed\"}):/*#__PURE__*/_jsx(\"a\",{className:\"block py-2 text-gray-700\",children:\"Feed\"})})}),/*#__PURE__*/_jsx(Link,{to:\"/post\",children:/*#__PURE__*/_jsx(\"li\",{children:location.pathname==='/post'?/*#__PURE__*/_jsx(\"a\",{className:\"block py-2 text-red-600\",children:\"Post\"}):/*#__PURE__*/_jsx(\"a\",{className:\"block py-2 text-gray-700\",children:\"Post\"})})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{onClick:handleLogout,className:\"block py-2 text-gray-700 cursor-pointer bg-gray-50\",children:\"Logout\"})})]})})]}),mobileMenu&&user&&/*#__PURE__*/_jsx(\"div\",{className:\"md:hidden w-full p-2\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"flex flex-col mt-4 items-center\",children:[/*#__PURE__*/_jsx(Link,{to:\"/feed\",children:/*#__PURE__*/_jsx(\"li\",{children:location.pathname==='/feed'?/*#__PURE__*/_jsx(\"a\",{className:\"block py-2 text-red-600\",children:\"Feed\"}):/*#__PURE__*/_jsx(\"a\",{className:\"block py-2 text-gray-700\",children:\"Feed\"})})}),/*#__PURE__*/_jsx(Link,{to:\"/post\",children:/*#__PURE__*/_jsx(\"li\",{children:location.pathname==='/post'?/*#__PURE__*/_jsx(\"a\",{className:\"block py-2 text-red-600\",children:\"Post\"}):/*#__PURE__*/_jsx(\"a\",{className:\"block py-2 text-gray-700\",children:\"Post\"})})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{onClick:handleLogout,className:\"block cursor-pointer py-2 pr-4 pl-3 text-gray-700 rounded\",children:\"Logout\"})})]})})]});};export default Header;","map":{"version":3,"names":["React","useEffect","useState","logo","logout","decode","Link","useNavigate","useDispatch","useLocation","Header","user","setUser","setItemOffSet","navigateTo","dispatch","location","mobileMenu","setMobileMenu","handleMobileMenu","handleLogout","token","decodedToken","exp","Date","getTime","JSON","parse","localStorage","getItem","handleFeed","pathname"],"sources":["D:/projects/social-media-app/client/src/components/header.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\"\r\nimport logo from \"../images/logo.png\";\r\nimport { logout } from \"../actions/actions\";\r\nimport decode from 'jwt-decode';\r\nimport { Link, useNavigate} from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nconst Header = ({user, setUser, setItemOffSet}) => {  \r\n    const navigateTo = useNavigate();  \r\n    const dispatch = useDispatch();\r\n    const location = useLocation();\r\n    const[mobileMenu, setMobileMenu] = useState(false);\r\n\r\n    const handleMobileMenu = () => {\r\n        setMobileMenu(!mobileMenu);\r\n    }\r\n\r\n    const handleLogout = () => {\r\n        dispatch(logout());\r\n        setUser(null);\r\n        navigateTo('/');\r\n    }\r\n    \r\n    useEffect(() => {\r\n        const token = user?.token;\r\n    \r\n        if (token) {\r\n            const decodedToken = decode(token);\r\n    \r\n            if (decodedToken.exp * 1000 < new Date().getTime())\r\n                handleLogout();\r\n        }\r\n    \r\n        setUser(JSON.parse(localStorage.getItem('profile')));\r\n      }, [navigateTo]);\r\n    \r\n    const handleFeed = () => {\r\n        setItemOffSet(0);\r\n    }\r\n    return(\r\n        <nav className=\"w-full border-gray-300 rounded mb-2 md:border-b md:pr-5 md:pl-5 xs:pl-2 xs:pr-2 mt-2\">\r\n            <div className=\"flex justify-between flex-wrap items-center\">\r\n                <div className=\"flex-none\">\r\n                    <Link to='/feed' onClick={handleFeed}>\r\n                        <img src={logo} alt=\"logo\" className=\"md:w-40 xs:w-20\"/>\r\n                    </Link>\r\n                </div>                \r\n                {\r\n                    user &&\r\n                <div className=\"md:hidden sm:block\">\r\n                    <button onClick={handleMobileMenu} className=\"\">\r\n                        {\r\n                        mobileMenu ? \r\n                            <svg className=\"fill-gray-800\" xmlns=\"http://www.w3.org/2000/svg\" width=\"25\" height=\"25\" viewBox=\"0 0 16 16\">\r\n                                <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"/>\r\n                            </svg>\r\n                            :\r\n                            <svg className=\"fill-gray-800\" xmlns=\"http://www.w3.org/2000/svg\" width=\"25\" height=\"25\" viewBox=\"0 0 16 16\">\r\n                                <path fill-rule=\"evenodd\" d=\"M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z\"/>\r\n                            </svg>\r\n                        }\r\n                    </button>\r\n                </div>\r\n                }\r\n                {\r\n                user &&                \r\n                <div className=\"hidden md:block p-2\">\r\n                    <ul className=\"flex md:space-x-8 md:text-sm md:font-medium items-center\">\r\n                        <Link to='/feed'>\r\n                            <li>    \r\n                                {\r\n                                    location.pathname === '/feed' \r\n                                    ? \r\n                                    <a className=\"block py-2 text-red-600\">Feed</a>\r\n                                    :\r\n                                    <a className=\"block py-2 text-gray-700\">Feed</a>\r\n                                }\r\n                            </li>\r\n                        </Link>\r\n                        <Link to='/post'>\r\n                            <li>\r\n                                {\r\n                                    location.pathname === '/post' \r\n                                    ? \r\n                                    <a className=\"block py-2 text-red-600\">Post</a>\r\n                                    :\r\n                                    <a className=\"block py-2 text-gray-700\">Post</a>\r\n                                }\r\n                            </li>\r\n                        </Link>\r\n                            <li>\r\n                                <a onClick={handleLogout} className=\"block py-2 text-gray-700 cursor-pointer bg-gray-50\">\r\n                                    Logout\r\n                                </a>\r\n                            </li>\r\n                    </ul>\r\n                </div>\r\n            }\r\n            </div>\r\n            {\r\n            mobileMenu && user &&\r\n            <div className=\"md:hidden w-full p-2\">\r\n                <ul className=\"flex flex-col mt-4 items-center\">\r\n                    <Link to='/feed'>\r\n                        <li>    \r\n                            {\r\n                                location.pathname === '/feed' \r\n                                ? \r\n                                <a className=\"block py-2 text-red-600\">Feed</a>\r\n                                :\r\n                                <a className=\"block py-2 text-gray-700\">Feed</a>\r\n                            }\r\n                        </li>\r\n                    </Link>\r\n                    <Link to='/post'>\r\n                        <li>\r\n                            {\r\n                                location.pathname === '/post' \r\n                                ? \r\n                                <a className=\"block py-2 text-red-600\">Post</a>\r\n                                :\r\n                                <a className=\"block py-2 text-gray-700\">Post</a>\r\n                            }\r\n                        </li>\r\n                    </Link>\r\n                    <li>\r\n                        <a onClick={handleLogout} className=\"block cursor-pointer py-2 pr-4 pl-3 text-gray-700 rounded\">\r\n                            Logout\r\n                        </a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            }\r\n        </nav>\r\n)}\r\n\r\n\r\nexport default Header;"],"mappings":"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"},"metadata":{},"sourceType":"module"}