{"ast":null,"code":"import _slicedToArray from\"D:/projects/social-media-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useEffect,useState,useMemo}from'react';import{useDispatch,useSelector}from'react-redux';import{Navigate}from'react-router-dom';import{fetchPosts}from'./actions/actions';import Header from'./components/header';import Footer from'./components/footer';import{BrowserRouter as Router,Route,Routes}from'react-router-dom';import UploadPost from'./components/Posts/Post/UploadPost';import Auth from'./components/Auth/Auth';import PaginatedItems from'./components/pagination';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),currentId=_useState2[0],setCurrentId=_useState2[1];var dispatch=useDispatch();var posts=useSelector(function(state){return state.posts.posts;});var _useState3=useState(JSON.parse(localStorage.getItem('profile'))),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var itemsPerPage=6;var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),itemOffset=_useState6[0],setItemOffset=_useState6[1];useEffect(function(){setUser(JSON.parse(localStorage.getItem('profile')));},user);useEffect(function(){dispatch(fetchPosts());},[currentId]);var currentItems=useMemo(function(){var endOffset=itemOffset+itemsPerPage;return posts.slice(itemOffset,endOffset);},[posts,itemOffset,itemsPerPage]);return/*#__PURE__*/_jsx(\"div\",{className:\"w-full\",children:/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(Header,{user:user,setUser:setUser,setItemOffset:setItemOffset}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/auth\",exact:true,element:!user?/*#__PURE__*/_jsx(Auth,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/feed\"})}),/*#__PURE__*/_jsx(Route,{path:\"/\",exact:true,element:/*#__PURE__*/_jsx(Navigate,{to:\"/auth\"})}),/*#__PURE__*/_jsx(Route,{path:\"/feed\",exact:true,element:user?/*#__PURE__*/_jsx(PaginatedItems,{setCurrentId:setCurrentId,items:posts,currentItems:currentItems,itemsPerPage:itemsPerPage,setItemOffset:setItemOffset}):/*#__PURE__*/_jsx(Navigate,{to:\"/auth\"})}),/*#__PURE__*/_jsx(Route,{path:\"/post\",exact:true,element:user?/*#__PURE__*/_jsx(UploadPost,{currentId:currentId,setCurrentId:setCurrentId,user:user}):/*#__PURE__*/_jsx(Navigate,{to:\"/auth\"})})]}),/*#__PURE__*/_jsx(Footer,{})]})});};export default App;","map":{"version":3,"names":["React","useEffect","useState","useMemo","useDispatch","useSelector","Navigate","fetchPosts","Header","Footer","BrowserRouter","Router","Route","Routes","UploadPost","Auth","PaginatedItems","App","currentId","setCurrentId","dispatch","posts","state","JSON","parse","localStorage","getItem","user","setUser","itemsPerPage","itemOffset","setItemOffset","currentItems","endOffset","slice"],"sources":["D:/projects/social-media-app/client/src/App.js"],"sourcesContent":["import React from 'react';\nimport { useEffect, useState, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Navigate} from 'react-router-dom';\nimport { fetchPosts } from './actions/actions';\nimport Header from './components/header';\nimport Footer from './components/footer';\nimport { BrowserRouter as Router,  Route, Routes } from 'react-router-dom';\nimport UploadPost from './components/Posts/Post/UploadPost';\nimport Auth from './components/Auth/Auth';\nimport PaginatedItems from './components/pagination';\n\nconst App = () => {\n  const[currentId, setCurrentId] = useState('');\n  const dispatch = useDispatch();\n  const posts = useSelector((state) => state.posts.posts);\n  const[user, setUser] = useState(JSON.parse(localStorage.getItem('profile')));\n \n  const itemsPerPage = 6;\n  const [itemOffset, setItemOffset] = useState(0);\n\n  useEffect(() => {\n    setUser(JSON.parse(localStorage.getItem('profile')));\n  }, user)\n\n  useEffect(() => {\n     dispatch(fetchPosts());\n  },[currentId])\n\n\n  const currentItems = useMemo(() => {\n    const endOffset = itemOffset + itemsPerPage;\n    return posts.slice(itemOffset, endOffset)\n }, [posts, itemOffset, itemsPerPage])\n\n  return (\n    <div className=\"w-full\">\n      <Router>\n        <Header user={user} setUser={setUser} setItemOffset={setItemOffset}/> \n        <Routes>\n            <Route path='/auth' exact element={ !user ? <Auth /> : <Navigate to='/feed'/>} />\n            <Route path='/' exact element={<Navigate to='/auth'/>}/>\n            <Route path='/feed' exact element={user ? <PaginatedItems setCurrentId={setCurrentId} items={posts} currentItems={currentItems} itemsPerPage={itemsPerPage} setItemOffset={setItemOffset} /> : <Navigate to='/auth'/>} />\n            <Route path='/post' exact element={user ? <UploadPost currentId={currentId} setCurrentId={setCurrentId} user={user} /> : <Navigate to=\"/auth\"/>}/>              \n        </Routes>\n        <Footer/>\n      </Router>  \n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}