{"ast":null,"code":"import _regeneratorRuntime from\"D:/node/social-media-app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"D:/node/social-media-app/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/node/social-media-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/node/social-media-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useDispatch}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import{createPost,updatePost}from\"../../actions/actions\";import{useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UploadPost=function UploadPost(_ref){var currentId=_ref.currentId,setCurrentId=_ref.setCurrentId;var navigateTo=useNavigate();var dispatch=useDispatch();var post=useSelector(function(state){return currentId?state.posts.posts.find(function(p){return p._id===currentId;}):null;});var user=JSON.parse(localStorage.getItem('profile'));var _useState=useState({tags:\"\",message:\"\",selectedFile:\"\",name:\"\"}),_useState2=_slicedToArray(_useState,2),postData=_useState2[0],setPostData=_useState2[1];useEffect(function(){if(post)setPostData(post);},[post]);var handleOnSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var _user$result,_user$result2;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!currentId){_context.next=6;break;}_context.next=4;return dispatch(updatePost(currentId,_objectSpread(_objectSpread({},postData),{},{name:user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.name})));case 4:_context.next=8;break;case 6:_context.next=8;return dispatch(createPost(_objectSpread(_objectSpread({},postData),{},{name:user===null||user===void 0?void 0:(_user$result2=user.result)===null||_user$result2===void 0?void 0:_user$result2.name})));case 8:clear();navigateTo('/feed');case 10:case\"end\":return _context.stop();}}},_callee);}));return function handleOnSubmit(_x){return _ref2.apply(this,arguments);};}();var clear=function clear(){setCurrentId(null);setPostData({selectedFile:'',message:'',tags:''});};var handleBack=function handleBack(e){e.preventDefault();navigateTo(-1);};var handleTags=function handleTags(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{tags:e.target.value.split(' ')}));};return/*#__PURE__*/_jsx(\"div\",{className:\"md:w-1/3 mt-5 w-full md:mx-auto lg-tablets:w-96 lg-tablets:mx-auto\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"p-5 shadow-lg space-y-2\",enctype:\"multipart/form-data\",onSubmit:handleOnSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"fill-red-400\",xmlns:\"http://www.w3.org/2000/svg\",width:\"45\",height:\"45\",viewBox:\"0 0 16 16\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M8 2a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13h8.906C14.502 13 16 11.57 16 9.773c0-1.636-1.242-2.969-2.834-3.194C12.923 3.999 10.69 2 8 2zm2.354 5.146a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2z\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsxs(\"h1\",{className:\"text-gray-700 font-medium\",children:[post?'Edit':'Upload',\" a Post\"]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-1\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full rounded border border-gray-300 p-2  text-gray-800\",maxLength:100,name:\"message\",type:\"text\",value:postData.message,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{message:e.target.value}));},placeholder:\"Write something about a post here...\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-1\",children:/*#__PURE__*/_jsx(\"input\",{className:\"w-full rounded border border-gray-300 p-2 text-gray-800\",name:\"tags\",type:\"text\",value:postData.tags,onChange:handleTags,placeholder:\"Tags e.g. travel, foodie, cricketlover\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full\",children:/*#__PURE__*/_jsx(\"input\",{className:\"\",type:\"file\",accept:\".jpg, .jpeg, .png\",name:\"selectedFile\",onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{selectedFile:e.target.files[0]}));},required:currentId==null})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full mt-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-1/2 p-3 bg-red-400 text-white rounded-l\",children:\"Submit\"}),/*#__PURE__*/_jsx(\"button\",{type:\"reset\",className:\"w-1/2 p-3 bg-orange-300 rounded-r\",onClick:clear,children:\"Clear\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"p-2  justify-center font-medium  bg-white w-full rounded flex items-center\",onClick:handleBack,children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",fill:\"currentColor\",class:\"bi bi-backspace-fill\",viewBox:\"0 0 16 16\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M15.683 3a2 2 0 0 0-2-2h-7.08a2 2 0 0 0-1.519.698L.241 7.35a1 1 0 0 0 0 1.302l4.843 5.65A2 2 0 0 0 6.603 15h7.08a2 2 0 0 0 2-2V3zM5.829 5.854a.5.5 0 1 1 .707-.708l2.147 2.147 2.146-2.147a.5.5 0 1 1 .707.708L9.39 8l2.146 2.146a.5.5 0 0 1-.707.708L8.683 8.707l-2.147 2.147a.5.5 0 0 1-.707-.708L7.976 8 5.829 5.854z\"})}),\"\\xA0 Back\"]})})]})});};export default UploadPost;","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useNavigate","createPost","updatePost","useSelector","UploadPost","currentId","setCurrentId","navigateTo","dispatch","post","state","posts","find","p","_id","user","JSON","parse","localStorage","getItem","tags","message","selectedFile","name","postData","setPostData","handleOnSubmit","e","preventDefault","result","clear","handleBack","handleTags","target","value","split","files"],"sources":["D:/node/social-media-app/client/src/components/Forms/UploadPost.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\"\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { createPost, updatePost } from \"../../actions/actions\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst UploadPost = ({ currentId, setCurrentId}) => {\r\n\r\n    const navigateTo = useNavigate();\r\n    const dispatch = useDispatch();\r\n   \r\n    const post = useSelector((state) => currentId ? state.posts.posts.find((p) => p._id === currentId) : null);        \r\n   \r\n    const user = JSON.parse(localStorage.getItem('profile'));    \r\n    \r\n    const [postData, setPostData] = useState({\r\n        tags: \"\", \r\n        message: \"\",\r\n        selectedFile: \"\",\r\n        name: \"\"\r\n    })  \r\n\r\n    useEffect(() => {\r\n        if(post) \r\n            setPostData(post)\r\n    },[post])\r\n\r\n    const handleOnSubmit =  async (e) => {\r\n        e.preventDefault();\r\n\r\n            if(currentId) \r\n                await dispatch(updatePost(currentId, { ...postData, name:  user?.result?.name})); \r\n             else \r\n                await dispatch(createPost({ ...postData, name:  user?.result?.name}));  \r\n\r\n            clear();\r\n            navigateTo('/feed');\r\n    }\r\n\r\n    const clear = () => {\r\n        setCurrentId(null);\r\n        setPostData({ selectedFile:'', message:'', tags:'' });\r\n    }\r\n\r\n    const handleBack = (e) => {\r\n        e.preventDefault();\r\n        navigateTo(-1);\r\n    }    \r\n\r\n    const handleTags = (e) => setPostData({ ...postData, tags: e.target.value.split(' ')})\r\n    \r\n    return (\r\n        <div className=\"md:w-1/3 mt-5 w-full md:mx-auto lg-tablets:w-96 lg-tablets:mx-auto\">\r\n            <form className=\"p-5 shadow-lg space-y-2\" enctype=\"multipart/form-data\" onSubmit={handleOnSubmit}>\r\n                <div>\r\n                <div className=\"flex justify-center\">\r\n                    <svg className=\"fill-red-400\" xmlns=\"http://www.w3.org/2000/svg\" width=\"45\" height=\"45\" viewBox=\"0 0 16 16\">\r\n                        <path d=\"M8 2a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13h8.906C14.502 13 16 11.57 16 9.773c0-1.636-1.242-2.969-2.834-3.194C12.923 3.999 10.69 2 8 2zm2.354 5.146a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2z\"/>\r\n                    </svg>\r\n                </div>\r\n                <div className=\"flex justify-center\">\r\n                    <h1 className=\"text-gray-700 font-medium\">{post ? 'Edit': 'Upload'} a Post</h1>\r\n                </div>\r\n\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                    <textarea className=\"w-full rounded border border-gray-300 p-2  text-gray-800\" maxLength={100} name=\"message\" type=\"text\" value={postData.message} onChange={(e) => setPostData({ ...postData, message: e.target.value})} placeholder=\"Write something about a post here...\" required/>\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                    <input className=\"w-full rounded border border-gray-300 p-2 text-gray-800\" name=\"tags\" type=\"text\" value={postData.tags} onChange={handleTags} placeholder=\"Tags e.g. travel, foodie, cricketlover\" />\r\n                </div>\r\n                <div className=\"w-full\">\r\n                    <input className=\"\" type=\"file\" accept=\".jpg, .jpeg, .png\"  name=\"selectedFile\"  onChange={(e) => setPostData({ ...postData, selectedFile: e.target.files[0] })} required={currentId == null}/>                    \r\n                </div>\r\n                    <div className=\"flex w-full mt-2\">\r\n                    <button type=\"submit\" className=\"w-1/2 p-3 bg-red-400 text-white rounded-l\">Submit</button>\r\n                    <button type=\"reset\" className=\"w-1/2 p-3 bg-orange-300 rounded-r\" onClick={clear}>Clear</button>\r\n                </div>\r\n                <div className=\"\">\r\n                    <button className=\"p-2  justify-center font-medium  bg-white w-full rounded flex items-center\" onClick={handleBack}>\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-backspace-fill\" viewBox=\"0 0 16 16\">\r\n                          <path d=\"M15.683 3a2 2 0 0 0-2-2h-7.08a2 2 0 0 0-1.519.698L.241 7.35a1 1 0 0 0 0 1.302l4.843 5.65A2 2 0 0 0 6.603 15h7.08a2 2 0 0 0 2-2V3zM5.829 5.854a.5.5 0 1 1 .707-.708l2.147 2.147 2.146-2.147a.5.5 0 1 1 .707.708L9.39 8l2.146 2.146a.5.5 0 0 1-.707.708L8.683 8.707l-2.147 2.147a.5.5 0 0 1-.707-.708L7.976 8 5.829 5.854z\"/>\r\n                        </svg>            \r\n                        \t&nbsp;       \r\n                        Back\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UploadPost;"],"mappings":"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"},"metadata":{},"sourceType":"module"}